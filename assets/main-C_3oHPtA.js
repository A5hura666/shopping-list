import"./style-O7jFx6Bf.js";function a(t){const e=document.getElementById("liste-produits");e.innerHTML="";const o=t.length;t.forEach(n=>{const r=document.createElement("li");r.classList.add("bg-white","rounded-lg","shadow-md","p-4","flex","flex-col","items-center","text-center","transition-transform","duration-300","hover:shadow-lg","hover:-translate-y-1"),r.innerHTML=`
        <div class="mb-4">
            <h2 class="card-title text-xl text-gray-800">${n.nom}</h2>
            <p class="text-gray-600 mt-2">Quantité : <span class="stock">${n.quantite_stock}</span></p>
            <p class="text-indigo-600 font-bold mt-2">${n.prix_unitaire} €</p>
        </div>
        <button class="bg-blue-500 text-white px-4 py-2 rounded cursor-pointer w-full
                       hover:bg-blue-600 active:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400"
                data-id="${n.nom}">
            Ajouter à la liste
        </button>
    `,e.appendChild(r)}),document.querySelectorAll("button[data-id]").forEach(n=>{n.addEventListener("click",()=>d(t,n))}),m(o)}function l(t,e){const o=document.createElement("div");o.classList.add("fixed","bottom-5","right-5","bg-green-500","text-white","px-4","py-2","rounded","shadow-lg","transition-opacity","duration-500"),o.innerText=`${t} ajouté au panier (${e})`,document.body.appendChild(o),setTimeout(()=>{o.style.opacity="0",setTimeout(()=>o.remove(),500)},2e3)}function d(t,e){const o=e.getAttribute("data-id"),i=JSON.parse(localStorage.getItem("produits"))||t,n=i.find(c=>c.nom===o);if(!n||n.quantite_stock<=0){alert("Ce produit n'est plus en stock !");return}let r=JSON.parse(localStorage.getItem("panier"))||[];const s=r.find(c=>c.nom===n.nom);s?s.quantite_stock+=1:r.push({...n,quantite_stock:1}),n.quantite_stock-=1,localStorage.setItem("panier",JSON.stringify(r)),localStorage.setItem("produits",JSON.stringify(i));const u=e.parentElement?e.parentElement.querySelector(".stock"):null;u&&(u.innerText=n.quantite_stock),l(n.nom,s?s.quantite_stock:1)}function m(t){const e=document.getElementById("compteur-produits");e.innerText=t?`${t} produits`:"Aucun produit trouvé"}function p(t,e){return t.filter(o=>o.nom.toLowerCase().includes(e.toLowerCase()))}function g(t){return t.sort((e,o)=>e.prix_unitaire-o.prix_unitaire)}function f(t){return t.sort((e,o)=>e.nom.localeCompare(o.nom))}function h(){const t=document.getElementById("recherche"),e=document.getElementById("tri");t.value="",e.value="default",a(produits)}document.addEventListener("DOMContentLoaded",async()=>{let t;localStorage.getItem("produits")?t=JSON.parse(localStorage.getItem("produits")):(t=await(await fetch("/shopping-list/liste_produits_quotidien.json")).json(),localStorage.setItem("produits",JSON.stringify(t)));const e=document.getElementById("recherche"),o=document.getElementById("tri");document.getElementById("reset-filtres").addEventListener("click",h),o.addEventListener("change",n=>{let r=[...t];n.target.value==="prix"?r=g(r):n.target.value==="nom"&&(r=f(r)),a(r)}),e.addEventListener("input",()=>{const n=e.value,r=p(t,n);a(r)}),a(t)});
